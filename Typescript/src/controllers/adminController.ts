/**
 * RESTAPI SDKLib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

import { ApiResponse, RequestOptions } from '../core';
import { ErrorResponseError } from '../errors/errorResponseError';
import {
  AdminsyncPrincipalResponse,
  adminsyncPrincipalResponseSchema,
} from '../models/adminsyncPrincipalResponse';
import {
  ApiRestV2AdminChangeownerRequest,
  apiRestV2AdminChangeownerRequestSchema,
} from '../models/apiRestV2AdminChangeownerRequest';
import {
  ApiRestV2AdminConfigurationUpdateRequest,
  apiRestV2AdminConfigurationUpdateRequestSchema,
} from '../models/apiRestV2AdminConfigurationUpdateRequest';
import {
  ApiRestV2AdminResetpasswordRequest,
  apiRestV2AdminResetpasswordRequestSchema,
} from '../models/apiRestV2AdminResetpasswordRequest';
import {
  ApiRestV2AdminSyncprincipalRequest,
  apiRestV2AdminSyncprincipalRequestSchema,
} from '../models/apiRestV2AdminSyncprincipalRequest';
import { boolean, unknown } from '../schema';
import { BaseController } from './baseController';

export class AdminController extends BaseController {
  /**
   * To get details of the current configuration of a Thoughtspot cluster, use this endpoint.
   *
   * @return Response from the API call
   */
  async getClusterConfig(
    requestOptions?: RequestOptions
  ): Promise<ApiResponse<unknown>> {
    const req = this.createRequest('GET', '/api/rest/v2/admin/configuration');
    req.throwOn(500, ErrorResponseError, 'Operation failed or unauthorized request');
    return req.callAsJson(unknown(), requestOptions);
  }

  /**
   * To get the details of overrides to the Thoughtspot cluster configuration, use this endpoint.
   *
   * @return Response from the API call
   */
  async getClusterConfigOverrides(
    requestOptions?: RequestOptions
  ): Promise<ApiResponse<unknown>> {
    const req = this.createRequest(
      'GET',
      '/api/rest/v2/admin/configuration/overrides'
    );
    req.throwOn(500, ErrorResponseError, 'Operation failed or unauthorized request');
    return req.callAsJson(unknown(), requestOptions);
  }

  /**
   * To update the Thoughtspot cluster configuration, use this endpoint.
   *
   * @param body
   * @return Response from the API call
   */
  async updateClusterConfig(
    body: ApiRestV2AdminConfigurationUpdateRequest,
    requestOptions?: RequestOptions
  ): Promise<ApiResponse<boolean>> {
    const req = this.createRequest(
      'PUT',
      '/api/rest/v2/admin/configuration/update'
    );
    const mapped = req.prepareArgs({
      body: [body, apiRestV2AdminConfigurationUpdateRequestSchema],
    });
    req.header('Content-Type', 'application/json');
    req.json(mapped.body);
    req.throwOn(500, ErrorResponseError, 'Operation failed or unauthorized request');
    return req.callAsJson(boolean(), requestOptions);
  }

  /**
   * To reset the password of a ThoughtSpot user account, use this endpoint.
   *
   * It is mandatory to use Authorization header with token of a user with admin access to successfully
   * run this endpoint.
   *
   * At least one of User Id or username is mandatory. When both are given, then user id will be
   * considered.
   *
   * @param body
   * @return Response from the API call
   */
  async resetUserPassword(
    body: ApiRestV2AdminResetpasswordRequest,
    requestOptions?: RequestOptions
  ): Promise<ApiResponse<boolean>> {
    const req = this.createRequest('PUT', '/api/rest/v2/admin/resetpassword');
    const mapped = req.prepareArgs({
      body: [body, apiRestV2AdminResetpasswordRequestSchema],
    });
    req.header('Content-Type', 'application/json');
    req.json(mapped.body);
    req.throwOn(500, ErrorResponseError, 'Operation failed or unauthorized request');
    return req.callAsJson(boolean(), requestOptions);
  }

  /**
   * To programmatically synchronize user accounts and user groups from external system with ThoughtSpot,
   * use this endpoint.
   *
   * The payload takes principals containing all users and groups present in the external system.
   *
   * The users and user groups in Thoughtspot get updated for any matching inputs.
   *
   * Any user and user group present in the input, but not present in the cluster, gets created in
   * cluster.
   * n You can optionally choose to delete the user and groups from the cluster, that are not present in
   * the input.
   *
   * @param body
   * @return Response from the API call
   */
  async syncPrincipal(
    body: ApiRestV2AdminSyncprincipalRequest,
    requestOptions?: RequestOptions
  ): Promise<ApiResponse<AdminsyncPrincipalResponse>> {
    const req = this.createRequest('PUT', '/api/rest/v2/admin/syncprincipal');
    const mapped = req.prepareArgs({
      body: [body, apiRestV2AdminSyncprincipalRequestSchema],
    });
    req.header('Content-Type', 'application/json');
    req.json(mapped.body);
    req.throwOn(500, ErrorResponseError, 'Operation failed or unauthorized request');
    return req.callAsJson(adminsyncPrincipalResponseSchema, requestOptions);
  }

  /**
   * To programmatically change the owner of one or several objects from one user account to another, use
   * this endpoint.
   *
   * You might want to transfer ownership of objects owned by a user to another active user, when the
   * account is removed from the ThoughtSpot application.
   *
   * @param body
   * @return Response from the API call
   */
  async changeOwnerOfObjects(
    body: ApiRestV2AdminChangeownerRequest,
    requestOptions?: RequestOptions
  ): Promise<ApiResponse<boolean>> {
    const req = this.createRequest('PUT', '/api/rest/v2/admin/changeowner');
    const mapped = req.prepareArgs({
      body: [body, apiRestV2AdminChangeownerRequestSchema],
    });
    req.header('Content-Type', 'application/json');
    req.json(mapped.body);
    req.throwOn(500, ErrorResponseError, 'Operation failed or unauthorized request');
    return req.callAsJson(boolean(), requestOptions);
  }
}
